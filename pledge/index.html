<!doctype html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
  <title>The Commitment to Truth | Theios Research Institute, Inc.</title>
  <meta name="description" content="A simple pledge. A serious promise. Commit to seeking truth—even when it's uncomfortable." />
  <meta name="theme-color" content="#0b1e34" />

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="../favicon.png" />
  <link rel="apple-touch-icon" href="../favicon.png" />

  <!-- Social -->
  <meta property="og:site_name" content="Theios Research Institute, Inc." />
  <meta property="og:title" content="The Commitment to Truth | Theios Research Institute, Inc." />
  <meta property="og:description" content="A simple pledge. A serious promise. Commit to seeking truth—even when it's uncomfortable." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://theios.org/pledge" />
  <meta property="og:image" content="https://theios.org/theios-logo-og-wide.png?v=3" />
  <link rel="canonical" href="https://theios.org/pledge" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://theios.org/theios-logo-og-wide.png?v=3" />

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "The Commitment to Truth",
    "description": "A simple pledge. A serious promise. Commit to seeking truth—even when it's uncomfortable.",
    "url": "https://theios.org/pledge",
    "publisher": {
      "@type": "ResearchOrganization",
      "name": "Theios Research Institute, Inc.",
      "url": "https://theios.org",
      "logo": "https://theios.org/theios-logo-variant.png"
    }
  }
  </script>

  <style>
    :root{
      --bg1:#0b1e34; --bg2:#143d66;
      --card:#0f172a; --ink:#e5e7eb; --muted:#a3afbf;
      --line:#1f2937; --accent:#3b82f6;
      --btn:#0b1220; --btn-hover:brightness(1.1);
    }
    /* Light tokens (used when data-theme='light') */
    :root.light{
      --bg1:#c9d6e5; --bg2:#a8bdd4;
      --card:#ffffff; --ink:#0b1e34; --muted:#2c4a6e;
      --line:#8fa5be; --btn:#ffffff; --btn-hover:none;
      --radial-overlay:rgba(11,30,52,0.25);
      --heading-color:#0b1e34;
    }
    :root:not(.light){
      --radial-overlay:#1f3b62;
      --heading-color:var(--ink);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:
        radial-gradient(1200px 700px at 50% -200px, var(--radial-overlay) 0%, transparent 60%),
        linear-gradient(135deg,var(--bg1),var(--bg2));
      color:var(--ink);
      font:16px/1.55 Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      display:grid; place-items:start center;
    }
    .wrap{width:100%; max-width:900px; padding:28px 20px 64px; position:relative}

    /* Theme toggle */
    .theme-toggle{
      position:absolute; top:18px; right:18px;
      display:inline-flex; gap:8px; align-items:center;
      padding:.55rem .75rem; border-radius:12px;
      border:1px solid var(--line); background:var(--btn);
      color:var(--ink); cursor:pointer; user-select:none;
    }
    .theme-toggle svg{width:18px;height:18px;display:block}

    /* Music player button */
    .music-toggle{
      position:absolute; top:18px; right:110px;
      display:inline-flex; gap:6px; align-items:center;
      padding:.55rem .75rem; border-radius:12px;
      border:1px solid var(--line); background:var(--btn);
      color:var(--muted); cursor:pointer; user-select:none;
      font-size:.9rem; transition:all .2s ease;
    }
    .music-toggle:hover{
      color:var(--ink);
      border-color:var(--accent);
    }
    .music-toggle.playing{
      color:var(--accent);
      border-color:var(--accent);
      background:rgba(59,130,246,.1);
    }
    .music-toggle .music-icon{
      font-size:1rem;
    }
    .music-toggle .music-bars{
      display:none;
      gap:2px;
      height:14px;
      align-items:flex-end;
    }
    .music-toggle.playing .music-bars{
      display:flex;
    }
    .music-toggle.playing .music-note{
      display:none;
    }
    .music-bar{
      width:3px;
      background:var(--accent);
      border-radius:1px;
      animation:musicBar 0.8s ease-in-out infinite;
    }
    .music-bar:nth-child(1){ height:6px; animation-delay:0s; }
    .music-bar:nth-child(2){ height:10px; animation-delay:0.2s; }
    .music-bar:nth-child(3){ height:4px; animation-delay:0.4s; }
    .music-bar:nth-child(4){ height:8px; animation-delay:0.1s; }
    @keyframes musicBar{
      0%,100%{ transform:scaleY(1); }
      50%{ transform:scaleY(0.5); }
    }
    .yt-player-container{
      position:fixed;
      bottom:-9999px;
      left:-9999px;
      width:1px;
      height:1px;
      overflow:hidden;
    }

    /* Back link */
    .back-link{
      display:inline-flex; align-items:center; gap:6px;
      color:var(--muted); text-decoration:none; font-size:.95rem;
      margin-bottom:18px; transition:color .15s;
    }
    .back-link:hover{color:var(--ink)}
    .back-link svg{width:16px;height:16px}

    /* Movement counter */
    .movement-counter{
      text-align:center;
      margin-bottom:20px;
    }
    .counter-badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:12px 24px;
      background:rgba(59,130,246,.12);
      border:1px solid rgba(59,130,246,.3);
      border-radius:50px;
      margin-bottom:8px;
    }
    .counter-icon{
      font-size:1.2rem;
    }
    .counter-text{
      font-size:1rem;
      color:var(--ink);
    }
    .counter-text strong{
      color:var(--accent);
    }
    .counter-sub{
      font-size:.9rem;
      color:var(--muted);
      margin:0;
    }
    /* Stakes card - discovery/illumination theme */
    .stakes-card{
      background:linear-gradient(135deg, rgba(251,191,36,.1), rgba(251,191,36,.03));
      border-color:rgba(251,191,36,.3);
      margin-bottom:20px;
    }
    .stakes-lead{
      font-size:1.15rem;
      margin-bottom:12px;
    }
    .stakes-card p{
      margin:0 0 10px;
    }
    .stakes-cta{
      margin-top:14px;
      padding-top:14px;
      border-top:1px solid rgba(251,191,36,.2);
      font-size:1.05rem;
    }

    /* Logo hero */
    .logo-hero{
      display:flex; justify-content:center; margin:10px 0 20px;
    }
    .logo-hero a{display:block}
    .logo-hero .logo-img{
      width:120px; height:auto;
      filter:drop-shadow(0 8px 20px rgba(0,0,0,.3));
      transition:transform .15s ease;
    }
    .logo-hero .logo-img:hover{transform:scale(1.03)}

    /* Header */
    .page-header{
      text-align:center; margin-bottom:28px;
    }
    .page-header h1{
      font-size:2.2rem; margin:0 0 8px; font-weight:700;
      color:var(--heading-color);
    }
    .page-header .sub{
      font-size:1.1rem; color:var(--muted); margin:0 0 12px; font-weight:600;
    }
    .page-header .note{
      font-size:1rem; color:var(--ink); max-width:680px; margin:0 auto;
    }

    /* Card */
    .card{
      background:var(--card); border:1px solid var(--line);
      border-radius:18px; box-shadow:0 18px 48px rgba(0,0,0,.25);
      padding:24px 28px; margin-bottom:20px;
    }
    .card h2{
      font-size:1.4rem; margin:0 0 14px; font-weight:600;
      color:var(--heading-color);
    }
    .card p{margin:0 0 12px}
    .card p:last-child{margin-bottom:0}

    /* Pledge text */
    .pledge-text{
      white-space:pre-line;
      font-family:Merriweather,Georgia,serif;
      font-size:1.05rem;
      font-style:italic;
      font-weight:400;
      line-height:1.7;
      padding:18px 22px;
      background:rgba(255,255,255,.03);
      border-radius:12px;
      border-left:4px solid var(--accent);
      margin:14px 0;
    }
    /* Dynamic name in pledge */
    .name-blank{
      font-style:normal;
      font-weight:600;
      color:var(--accent);
      border-bottom:2px solid var(--accent);
      padding:0 4px;
      transition:color .15s, border-color .15s;
    }
    .name-blank.filled{
      color:var(--ink);
      border-bottom-style:solid;
    }

    /* Native form styling */
    .pledge-form{
      margin-top:14px;
    }
    .form-group{
      margin-bottom:20px;
    }
    .form-group label{
      display:block;
      font-weight:600;
      margin-bottom:8px;
      color:var(--ink);
    }
    .form-group label .required{
      color:#ef4444;
      margin-left:2px;
    }
    .form-group input[type="text"],
    .form-group input[type="email"]{
      width:100%;
      padding:14px 16px;
      font-size:1rem;
      border:1px solid var(--line);
      border-radius:10px;
      background:rgba(255,255,255,.05);
      color:var(--ink);
      transition:border-color .15s, box-shadow .15s;
    }
    .form-group input:focus{
      outline:none;
      border-color:var(--accent);
      box-shadow:0 0 0 3px rgba(59,130,246,.15);
    }
    .form-group input::placeholder{
      color:var(--muted);
    }
    .checkbox-group{
      display:flex;
      align-items:flex-start;
      gap:12px;
      padding:14px 16px;
      background:rgba(255,255,255,.03);
      border-radius:10px;
      border:1px solid var(--line);
      cursor:pointer;
      transition:border-color .15s;
    }
    .checkbox-group:hover{
      border-color:var(--accent);
    }
    .checkbox-group input[type="checkbox"]{
      width:20px;
      height:20px;
      margin-top:2px;
      flex-shrink:0;
      accent-color:var(--accent);
      cursor:pointer;
    }
    .checkbox-group span{
      color:var(--ink);
      line-height:1.5;
    }
    .submit-btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:14px 28px;
      font-size:1.05rem;
      font-weight:600;
      color:#fff;
      background:var(--accent);
      border:none;
      border-radius:12px;
      cursor:pointer;
      transition:transform .1s, filter .15s;
    }
    .submit-btn:hover{
      filter:brightness(1.1);
    }
    .submit-btn:active{
      transform:scale(0.98);
    }
    .submit-btn svg{
      width:18px;
      height:18px;
    }
    .form-note{
      margin-top:12px;
      font-size:.88rem;
      color:var(--muted);
    }
    /* Success/error states */
    .form-message{
      padding:16px 20px;
      border-radius:10px;
      margin-top:16px;
      display:none;
    }
    .form-message.success{
      background:rgba(34,197,94,.1);
      border:1px solid rgba(34,197,94,.3);
      color:#22c55e;
    }
    .form-message.error{
      background:rgba(239,68,68,.1);
      border:1px solid rgba(239,68,68,.3);
      color:#ef4444;
    }
    /* Enhanced success message */
    .form-message.success{
      background:rgba(34,197,94,.08);
      border:1px solid rgba(34,197,94,.25);
      padding:20px 24px;
    }
    .success-header{
      display:flex;
      align-items:center;
      gap:10px;
      margin-bottom:8px;
    }
    .success-icon{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:28px;
      height:28px;
      background:#22c55e;
      color:#fff;
      border-radius:50%;
      font-size:14px;
      font-weight:bold;
    }
    .success-header strong{
      font-size:1.2rem;
      color:#22c55e;
    }
    .success-text{
      color:var(--ink);
      margin:0 0 12px;
      opacity:0.9;
    }
    .success-divider{
      height:1px;
      background:var(--line);
      margin:14px 0;
    }
    .success-cta{
      color:var(--ink);
      margin:0 0 12px;
      font-size:.95rem;
    }
    .share-buttons{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-bottom:14px;
    }
    .share-btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 16px;
      font-size:.9rem;
      font-weight:500;
      border:1px solid var(--line);
      border-radius:8px;
      cursor:pointer;
      transition:all .15s ease;
      background:var(--btn);
      color:var(--ink);
    }
    .share-btn:hover{
      transform:translateY(-1px);
      box-shadow:0 4px 12px rgba(0,0,0,.15);
    }
    .share-btn.share-x:hover{
      background:#000;
      color:#fff;
      border-color:#000;
    }
    .share-btn.share-fb:hover{
      background:#1877f2;
      color:#fff;
      border-color:#1877f2;
    }
    .share-btn.share-copy:hover{
      background:var(--accent);
      color:#fff;
      border-color:var(--accent);
    }
    .share-btn.copied{
      background:#22c55e !important;
      color:#fff !important;
      border-color:#22c55e !important;
    }
    .ledger-btn{
      background:linear-gradient(135deg, rgba(59,130,246,.15), rgba(59,130,246,.05));
      border-color:rgba(59,130,246,.3);
      color:var(--accent);
      text-decoration:none;
    }
    .ledger-btn:hover{
      background:var(--accent);
      color:#fff;
      border-color:var(--accent);
    }
    .success-challenge{
      font-size:.9rem;
      color:var(--muted);
      margin:0;
      font-style:italic;
    }
    .certificate-btn{
      background:linear-gradient(135deg, #f59e0b, #d97706);
      border-color:#d97706;
      color:#fff;
    }
    .certificate-btn:hover{
      background:linear-gradient(135deg, #fbbf24, #f59e0b) !important;
      border-color:#f59e0b !important;
      color:#fff !important;
    }
    /* Referral link */
    .referral-link-box{
      display:flex;
      gap:8px;
      margin-bottom:8px;
    }
    .referral-input{
      flex:1;
      padding:10px 14px;
      font-size:.85rem;
      border:1px solid var(--line);
      border-radius:8px;
      background:rgba(255,255,255,.05);
      color:var(--ink);
      font-family:monospace;
    }
    .referral-note{
      font-size:.85rem;
      color:var(--muted);
      margin:0;
    }

    /* Small text */
    .small{font-size:.92rem; color:var(--muted)}

    /* Divider */
    hr{border:0; border-top:1px solid var(--line); margin:28px 0}

    /* Footer */
    footer{
      text-align:center;
      padding:24px 20px;
      color:var(--muted);
      font-size:.9rem;
    }
    footer a{color:var(--accent); text-decoration:none}
    footer a:hover{text-decoration:underline}

    @media (max-width:640px){
      .wrap{padding:20px 16px 48px}
      .page-header h1{font-size:1.8rem}
      .card{padding:18px 20px}
      .pledge-text{padding:14px 16px; font-size:1rem}
      .theme-toggle{top:14px; right:14px}
      .music-toggle{top:14px; right:100px; padding:.45rem .6rem; font-size:.8rem}
      .music-toggle #musicLabel{display:none}
    }

    /* Respect system preference by default when user has not explicitly chosen */
    @media (prefers-color-scheme: light){
      :root.auto{ --bg1:#c9d6e5; --bg2:#a8bdd4; --card:#ffffff; --ink:#0b1e34; --muted:#2c4a6e; --line:#8fa5be; --btn:#ffffff; --btn-hover:none; --radial-overlay:rgba(11,30,52,0.25); --heading-color:#0b1e34; }
    }
  </style>

  <!-- Prevent flash: set initial class before paint -->
  <script>
    (function() {
      const saved = localStorage.getItem('theios.theme'); // 'light'|'dark'|'auto'
      const pref = saved || 'auto';
      const root = document.documentElement;
      root.classList.remove('light','auto');
      root.classList.add(pref);
      root.setAttribute('data-theme', pref);
    })();
  </script>
</head>
<body>
  <!-- Hidden YouTube Player -->
  <div class="yt-player-container">
    <div id="ytPlayer"></div>
  </div>

  <div class="wrap">
    <!-- Music toggle -->
    <button class="music-toggle" id="musicToggle" type="button" aria-label="Play ambient music">
      <span class="music-note">♪</span>
      <span class="music-bars">
        <span class="music-bar"></span>
        <span class="music-bar"></span>
        <span class="music-bar"></span>
        <span class="music-bar"></span>
      </span>
      <span id="musicLabel">Listen</span>
    </button>

    <!-- Theme toggle -->
    <button class="theme-toggle" id="themeToggle" type="button" aria-label="Toggle theme">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path fill="currentColor" d="M12 3a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0V4a1 1 0 0 1 1-1Zm0 14a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm8-5a1 1 0 0 1 1 1h-2a1 1 0 1 1 0-2h2a1 1 0 0 1-1 1ZM4 12a1 1 0 0 1-1-1h2a1 1 0 1 1 0 2H3a1 1 0 0 1 1-1Zm13.66 6.66a1 1 0 1 1-1.41 1.41l-1.41-1.41a1 1 0 1 1 1.41-1.41l1.41 1.41ZM8.17 6.34a1 1 0 1 1-1.41-1.41L8.17 3.5a1 1 0 1 1 1.41 1.41L8.17 6.34Zm8.48-1.41a1 1 0 1 1 1.41 1.41l-1.41 1.41a1 1 0 1 1-1.41-1.41l1.41-1.41ZM6.34 17.66a1 1 0 1 1 1.41-1.41l1.41 1.41a1 1 0 0 1-1.41 1.41L6.34 17.66Z"/>
      </svg>
      <span id="themeLabel">Auto</span>
    </button>

    <!-- Back link -->
    <a href="../" class="back-link">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Back to Theios Research Institute, Inc.
    </a>

    <!-- Logo -->
    <div class="logo-hero">
      <a href="../">
        <img src="../theios-logo-variant.png" alt="Theios Research Institute, Inc." class="logo-img" onerror="this.src='../theios-logo-favicon.png'">
      </a>
    </div>

    <!-- Movement Counter -->
    <div class="movement-counter">
      <p class="counter-sub">Be among the first to make this choice deliberately.</p>
    </div>

    <!-- Why We Created This Pledge -->
    <article class="card" style="background:linear-gradient(135deg, rgba(59,130,246,.08), rgba(59,130,246,.02)); border-color:rgba(59,130,246,.2);">
      <h2>Why We Created This Pledge</h2>
      <p>At <strong>Theios Research Institute, Inc.</strong>, our work focuses on how understanding actually forms — how information organizes, evolves, and reveals patterns across domains.</p>
      <p>Through this research, one insight became unavoidable:<br>
      truth-seeking is not just a moral ideal. It is a <strong>practice</strong> — a way of relating to evidence, uncertainty, and belief that shapes what can be discovered about reality.</p>
      <p style="margin-bottom:0;">This pledge grows out of that insight.<br>
      It reflects a commitment to the conditions that make genuine discovery possible.</p>
    </article>

    <!-- Header -->
    <header class="page-header">
      <h1>Sign the Pledge</h1>
      <p class="sub">A voluntary commitment to seek understanding — and to follow evidence wherever it leads.</p>
    </header>

    <!-- Value Proposition -->
    <article class="card" style="background:linear-gradient(135deg, rgba(59,130,246,.08), rgba(59,130,246,.02)); border-color:rgba(59,130,246,.2);">
      <h2 style="margin-top:0;">When you sign, you:</h2>
      <ul style="margin:0; padding-left:20px; line-height:1.8;">
        <li>Affirm this commitment for yourself</li>
        <li>Receive a personalized certificate</li>
        <li>May share the pledge with others, if you choose</li>
        <li>Optionally choose to affirm this commitment publicly, as a personal signal of accountability—not conformity</li>
      </ul>
    </article>

    <!-- Why This Matters Now -->
    <article class="card stakes-card">
      <h2>Why This Matters Now</h2>
      <p><strong>We live in a strange moment.</strong></p>
      <p>We have more access to information than ever before — and more confusion about what to trust.</p>
      <p>Confidence is often rewarded more than accuracy.<br>
      Belonging can feel safer than questioning.<br>
      And it's easy to let others decide what's true for us.</p>
      <p>The result is subtle but serious: people drift from understanding reality toward defending conclusions.</p>
      <p><strong>This pledge is meant to interrupt that drift.</strong></p>
      <p style="margin-bottom:0;">Signing this pledge is a single, deliberate choice.<br>
      Its influence unfolds over time — not through effort, but through alignment.</p>
    </article>

    <!-- The Pledge -->
    <article class="card">
      <h2>The Pledge</h2>

      <div class="form-group" style="margin-bottom:18px;">
        <label for="signerName">Enter your full name to begin<span class="required">*</span></label>
        <input type="text" id="signerName" placeholder="Your full name" autocomplete="name">
      </div>

      <div class="pledge-text">I, <span id="nameInPledge" class="name-blank">_____________________</span>, make this commitment freely and in good faith:

<strong>To the best of my ability, I commit to:</strong>
• Seek understanding over comfort or convenience
• Follow the evidence wherever it leads, not where I wish it to go
• Question my own assumptions and remain open to being wrong
• Distinguish confidence from certainty—and curiosity from agreement
• Resist letting others decide what is true on my behalf
• Revise my beliefs when new evidence or understanding emerges

I accept that this commitment may challenge familiar beliefs and assumptions.

<strong>This commitment is not about being right.</strong>
It is about how I hold, question, and revise my conclusions.</div>
      <p class="small">Take a moment to read carefully before signing.</p>
    </article>

    <!-- What this is - moved higher for trust building -->
    <article class="card">
      <h2>What This Means (and What It Does Not)</h2>
      <p><strong>✓ This is:</strong></p>
      <ul style="margin:8px 0 16px; padding-left:24px; line-height:1.8;">
        <li>A commitment to seeking understanding of how things actually are</li>
        <li>A willingness to update your worldview when evidence warrants it</li>
        <li>A practice of rigorous, curious inquiry</li>
        <li>A refusal to let any authority — scientific, political, religious, or social — decide truth on your behalf</li>
      </ul>
      <p><strong>✗ This is not:</strong></p>
      <ul style="margin:8px 0 16px; padding-left:24px; line-height:1.8;">
        <li>An endorsement of any ideology or belief system</li>
        <li>A mandate to preach, persuade, or convert others</li>
        <li>A statement about left vs. right, science vs. religion, or any cultural divide</li>
      </ul>
      <p class="small" style="margin-top:8px;"><em>Note: This pledge is not specifically about interpersonal honesty or moral behavior — though we value and encourage both.</em></p>
      <p style="margin-bottom:0;">Perfection is not required.<br>
      <strong>Sincerity and curiosity are.</strong></p>
    </article>

    <!-- Community acknowledgment -->
    <p style="text-align:center; max-width:640px; margin:24px auto; color:var(--muted); font-style:italic; line-height:1.7;">
      Honest inquiry can be uncomfortable.<br>
      It often involves revising beliefs and tolerating uncertainty.<br>
      But over time, it tends to produce clearer thinking and fewer illusions.
    </p>
    <p style="text-align:center; max-width:640px; margin:0 auto 24px; color:var(--muted); font-style:italic; line-height:1.7;">
      When this approach is shared widely, its effects extend beyond any one person.
    </p>

    <!-- Sign the Commitment -->
    <article class="card">
      <h2>Sign the Commitment</h2>
      <p>By signing, you make a personal commitment to pursue truth and understanding in good faith.</p>

      <form class="pledge-form" id="pledgeForm" action="https://pledge-handler-bc3efnkumq-uc.a.run.app" method="POST">
        <!-- Honeypot spam protection - bots fill this, humans don't see it -->
        <input type="text" name="_gotcha" style="display:none !important" tabindex="-1" autocomplete="off">
        <!-- Hidden field for pledge text -->
        <input type="hidden" name="pledge_version" value="v1-2026">
        <!-- Hidden field for full name (populated from signerName) -->
        <input type="hidden" id="fullNameHidden" name="full_name" value="">
        <!-- Signup date for anniversary tracking -->
        <input type="hidden" id="signupDate" name="signup_date" value="">

        <div class="form-group">
          <label class="checkbox-group">
            <input type="checkbox" name="commitment" value="confirmed" required>
            <span>I have read the pledge above and I commit to it.<span class="required">*</span></span>
          </label>
        </div>

        <div class="form-group">
          <label for="email">Email Address<span class="required">*</span></label>
          <input type="email" id="email" name="email" placeholder="your@email.com" required>
        </div>

        <div class="form-group">
          <label for="location">Location (optional)</label>
          <input type="text" id="location" name="location" placeholder="e.g., California, USA">
          <p class="small" style="margin:4px 0 0; color:var(--muted); font-style:italic;">Shown on public ledger if you opt in below.</p>
        </div>

        <div class="form-group">
          <label class="checkbox-group">
            <input type="checkbox" name="public_ledger" value="yes">
            <span>I choose to have my name listed on the <a href="./signatories/" style="color:var(--accent)">public ledger of signatories</a> (optional).</span>
          </label>
          <p class="small" style="margin:4px 0 0 24px; color:var(--muted); font-style:italic;">Public listing is optional. You may affirm this pledge privately.</p>
        </div>

        <button type="submit" class="submit-btn">
          Affirm the Commitment
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </button>

        <p class="form-note">Your information is handled securely and will never be sold or shared. See our <a href="../privacy-policy.html" style="color:var(--accent)">Privacy Policy</a>.</p>

        <div class="form-message success" id="successMsg">
          <div class="success-header">
            <span class="success-icon">✓</span>
            <strong>Welcome, Truth Seeker.</strong>
          </div>
          <p class="success-text">You've joined a growing movement of people who refuse to let comfort override honesty. Your commitment matters.</p>
          <div class="success-divider"></div>
          <p class="success-cta"><strong>Help the movement grow:</strong></p>
          <div class="share-buttons">
            <button type="button" class="share-btn share-x" id="shareX">
              <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
              Share on X
            </button>
            <button type="button" class="share-btn share-fb" id="shareFB">
              <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
              Facebook
            </button>
            <button type="button" class="share-btn share-copy" id="shareCopy">
              <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
              <span id="copyText">Copy Link</span>
            </button>
          </div>
          <p class="success-challenge">Challenge someone you respect to take the pledge.<br>The truth needs allies.</p>
          <div class="success-divider"></div>
          <p class="success-cta"><strong>Get your certificate:</strong></p>
          <button type="button" class="share-btn certificate-btn" id="downloadCert">
            <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
            Download Certificate
          </button>
          <div class="success-divider"></div>
          <p class="success-cta"><strong>Your referral link:</strong></p>
          <div class="referral-link-box">
            <input type="text" id="referralLink" class="referral-input" readonly>
            <button type="button" class="share-btn" id="copyReferral">
              <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
              <span id="copyReferralText">Copy</span>
            </button>
          </div>
          <p class="referral-note">Share this link to track who you've inspired to join.</p>
          <div class="success-divider"></div>
          <div id="ledgerMessage">
            <p class="success-cta" id="ledgerText"></p>
            <a href="./signatories/" class="share-btn ledger-btn" id="viewLedger">
              <svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
              View Public Ledger
            </a>
          </div>
        </div>
        <!-- Hidden canvas for certificate generation -->
        <canvas id="certCanvas" width="1200" height="630" style="display:none;"></canvas>
        <div class="form-message error" id="errorMsg">
          <strong>Something went wrong.</strong> Please try again or email research@theios.org directly.
        </div>
      </form>
    </article>

    <!-- Final Thought / Closing Invitation -->
    <article class="card stakes-card">
      <h2>A Final Thought</h2>
      <p>Societies drift when individuals stop questioning. History suggests that progress depends less on certainty than on the willingness to ask hard questions and follow the evidence where it leads.</p>
      <p>This commitment is made once, freely. Its influence unfolds gradually — not through obligation, but through alignment.</p>
      <p style="margin-bottom:0;">By affirming this pledge, I choose an identity defined not by what I believe, but by how I relate to belief itself.</p>
    </article>

    <hr />

    <p class="small" style="text-align:center; max-width:680px; margin:0 auto">
      <strong>Theios Research Institute, Inc.</strong> conducts research into how understanding forms — and how it can fail — under complex conditions.
    </p>
    <p class="small" style="text-align:center; max-width:680px; margin:8px auto 0">
      This pledge reflects principles that emerged from that work.<br>
      It stands on its own. Participation does not require affiliation with Theios.
    </p>

    <p class="small" style="text-align:center; max-width:680px; margin:20px auto 0">
      Interested in adapting this pledge for an organization, classroom, or group?<br>
      <a href="./groups/" style="color:var(--accent)">Start a Group Pledge →</a>
    </p>

  </div>

  <footer>
    <p>© <span id="y"></span> <a href="../">Theios Research Institute, Inc.</a></p>
  </footer>

  <script>
    // Year
    document.getElementById('y').textContent = new Date().getFullYear();

    // Theme toggle logic
    const root = document.documentElement;
    const btn  = document.getElementById('themeToggle');
    const label = document.getElementById('themeLabel');

    function setTheme(mode){ // 'light' | 'dark' | 'auto'
      root.classList.remove('light','auto');
      root.classList.add(mode);
      root.setAttribute('data-theme', mode);
      localStorage.setItem('theios.theme', mode);
      label.textContent = mode[0].toUpperCase() + mode.slice(1);
    }

    // initialize label from current state
    (function(){
      const current = root.getAttribute('data-theme') || 'auto';
      label.textContent = current[0].toUpperCase() + current.slice(1);
    })();

    // cycle Auto → Light → Dark → Auto
    btn.addEventListener('click', () => {
      const cur = root.getAttribute('data-theme') || 'auto';
      const next = cur === 'auto' ? 'light' : cur === 'light' ? 'dark' : 'auto';
      setTheme(next);
    });

    // Dynamic name in pledge
    const signerNameInput = document.getElementById('signerName');
    const nameInPledge = document.getElementById('nameInPledge');
    const fullNameHidden = document.getElementById('fullNameHidden');
    const defaultBlank = '_____________________';

    signerNameInput.addEventListener('input', () => {
      const name = signerNameInput.value.trim();
      if (name) {
        nameInPledge.textContent = name;
        nameInPledge.classList.add('filled');
        fullNameHidden.value = name;
      } else {
        nameInPledge.textContent = defaultBlank;
        nameInPledge.classList.remove('filled');
        fullNameHidden.value = '';
      }
    });

    // Form submission handler
    const form = document.getElementById('pledgeForm');
    const successMsg = document.getElementById('successMsg');
    const errorMsg = document.getElementById('errorMsg');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Hide any previous messages
      successMsg.style.display = 'none';
      errorMsg.style.display = 'none';

      // Validate name was entered
      const name = signerNameInput.value.trim();
      if (!name) {
        signerNameInput.focus();
        signerNameInput.style.borderColor = '#ef4444';
        signerNameInput.style.boxShadow = '0 0 0 3px rgba(239,68,68,.15)';
        return;
      }

      // Store email for referral link generation BEFORE async call
      const emailForRef = document.getElementById('email').value.trim();

      // Ensure hidden field is populated
      fullNameHidden.value = name;

      // Get form data as JSON for Cloud Function
      const formData = {
        full_name: fullNameHidden.value,
        email: document.getElementById('email').value.trim(),
        location: document.getElementById('location').value.trim(),
        commitment: document.querySelector('input[name="commitment"]').checked ? 'confirmed' : '',
        public_ledger: document.querySelector('input[name="public_ledger"]').checked ? 'yes' : '',
        pledge_version: document.querySelector('input[name="pledge_version"]').value,
        signup_date: document.getElementById('signupDate').value,
        _gotcha: document.querySelector('input[name="_gotcha"]').value
      };

      try {
        const response = await fetch(form.action, {
          method: 'POST',
          body: JSON.stringify(formData),
          headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          }
        });

        if (response.ok) {
          // Generate referral link using stored email
          signerRefCode = generateRefCode(emailForRef);
          const refUrl = 'https://theios.org/pledge?ref=' + signerRefCode;

          successMsg.style.display = 'block';
          form.reset();
          // Reset the name display
          signerNameInput.value = '';
          nameInPledge.textContent = defaultBlank;
          nameInPledge.classList.remove('filled');
          fullNameHidden.value = '';

          // Set referral link AFTER form.reset() because the input is inside the form
          const referralLinkInput = document.getElementById('referralLink');
          if (referralLinkInput) {
            referralLinkInput.value = refUrl;
          }

          // Show ledger message based on opt-in choice
          const ledgerText = document.getElementById('ledgerText');
          if (formData.public_ledger === 'yes') {
            ledgerText.innerHTML = '<strong>Your name will appear on the Public Ledger shortly.</strong>';
          } else {
            ledgerText.innerHTML = '<strong>See others who\'ve made their commitment public:</strong>';
          }

          // Scroll to success message
          successMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
          throw new Error('Form submission failed');
        }
      } catch (error) {
        errorMsg.style.display = 'block';
        errorMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    });

    // Reset name field styling on input
    signerNameInput.addEventListener('focus', () => {
      signerNameInput.style.borderColor = '';
      signerNameInput.style.boxShadow = '';
    });

    // Share button handlers
    const shareUrl = 'https://theios.org/pledge';
    const shareText = "I just signed the Commitment to Truth — a pledge to seek what's real, even when it's uncomfortable. Join me:";

    document.getElementById('shareX').addEventListener('click', () => {
      const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
      window.open(url, '_blank', 'width=550,height=420');
    });

    document.getElementById('shareFB').addEventListener('click', () => {
      const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}&quote=${encodeURIComponent(shareText)}`;
      window.open(url, '_blank', 'width=550,height=420');
    });

    document.getElementById('shareCopy').addEventListener('click', async () => {
      const copyBtn = document.getElementById('shareCopy');
      const copyText = document.getElementById('copyText');
      try {
        await navigator.clipboard.writeText(shareUrl);
        copyBtn.classList.add('copied');
        copyText.textContent = 'Copied!';
        setTimeout(() => {
          copyBtn.classList.remove('copied');
          copyText.textContent = 'Copy Link';
        }, 2000);
      } catch (err) {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = shareUrl;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        copyBtn.classList.add('copied');
        copyText.textContent = 'Copied!';
        setTimeout(() => {
          copyBtn.classList.remove('copied');
          copyText.textContent = 'Copy Link';
        }, 2000);
      }
    });

    // Referral tracking
    const urlParams = new URLSearchParams(window.location.search);
    const referrer = urlParams.get('ref');
    if (referrer) {
      // Store the referrer for form submission
      const referrerInput = document.createElement('input');
      referrerInput.type = 'hidden';
      referrerInput.name = 'referred_by';
      referrerInput.value = referrer;
      form.appendChild(referrerInput);
    }

    // Generate deterministic referral code from email (always same for same email)
    function generateRefCode(email) {
      // Simple hash function for consistent codes
      let hash = 0;
      for (let i = 0; i < email.length; i++) {
        const char = email.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash; // Convert to 32-bit integer
      }
      // Convert to alphanumeric string
      const hashStr = Math.abs(hash).toString(36);
      // Get first part of email (before @) cleaned up
      const emailPrefix = email.split('@')[0].toLowerCase().replace(/[^a-z0-9]/g, '').substring(0, 8);
      return emailPrefix + '-' + hashStr.substring(0, 4);
    }

    // Certificate generation
    let signerNameForCert = '';
    let signerRefCode = '';

    // Store signer info when form submits (before async submission)
    let signerEmail = '';
    form.addEventListener('submit', () => {
      signerNameForCert = signerNameInput.value.trim();
      signerEmail = document.getElementById('email').value.trim();
      // Set signup date for anniversary tracking
      document.getElementById('signupDate').value = new Date().toISOString();
    }, true);

    document.getElementById('downloadCert').addEventListener('click', () => {
      const canvas = document.getElementById('certCanvas');
      const ctx = canvas.getContext('2d');
      const width = canvas.width;
      const height = canvas.height;

      // Background gradient (navy blue)
      const gradient = ctx.createLinearGradient(0, 0, width, height);
      gradient.addColorStop(0, '#0b1e34');
      gradient.addColorStop(1, '#143d66');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, width, height);

      // Decorative border
      ctx.strokeStyle = 'rgba(59, 130, 246, 0.5)';
      ctx.lineWidth = 4;
      ctx.strokeRect(30, 30, width - 60, height - 60);

      // Inner decorative line
      ctx.strokeStyle = 'rgba(59, 130, 246, 0.2)';
      ctx.lineWidth = 1;
      ctx.strokeRect(50, 50, width - 100, height - 100);

      // Title
      ctx.fillStyle = '#3b82f6';
      ctx.font = 'bold 28px Inter, system-ui, sans-serif';
      ctx.textAlign = 'center';
      ctx.fillText('COMMITMENT TO TRUTH', width / 2, 100);

      // Decorative line under title
      ctx.strokeStyle = '#3b82f6';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(width / 2 - 200, 120);
      ctx.lineTo(width / 2 + 200, 120);
      ctx.stroke();

      // "This certifies that"
      ctx.fillStyle = '#a3afbf';
      ctx.font = '20px Inter, system-ui, sans-serif';
      ctx.fillText('This certifies that', width / 2, 180);

      // Signer name
      ctx.fillStyle = '#ffffff';
      ctx.font = 'bold 48px Merriweather, Georgia, serif';
      const displayName = signerNameForCert || 'Truth Seeker';
      ctx.fillText(displayName, width / 2, 250);

      // Underline for name
      const nameWidth = ctx.measureText(displayName).width;
      ctx.strokeStyle = '#3b82f6';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(width / 2 - nameWidth / 2 - 20, 270);
      ctx.lineTo(width / 2 + nameWidth / 2 + 20, 270);
      ctx.stroke();

      // Description
      ctx.fillStyle = '#e5e7eb';
      ctx.font = '18px Inter, system-ui, sans-serif';
      ctx.fillText('has made a commitment to seek truth with intellectual honesty,', width / 2, 330);
      ctx.fillText('even when it challenges beliefs, comfort, or social standing.', width / 2, 360);

      // Truth Seeker badge
      ctx.fillStyle = '#22c55e';
      ctx.font = 'bold 24px Inter, system-ui, sans-serif';
      ctx.fillText('✓ TRUTH SEEKER', width / 2, 430);

      // Date
      const date = new Date();
      const dateStr = date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
      ctx.fillStyle = '#a3afbf';
      ctx.font = '16px Inter, system-ui, sans-serif';
      ctx.fillText('Signed: ' + dateStr, width / 2, 480);

      // Footer - organization
      ctx.fillStyle = '#6b7280';
      ctx.font = '14px Inter, system-ui, sans-serif';
      ctx.fillText('Theios Research Institute, Inc.', width / 2, 560);
      ctx.fillText('theios.org/pledge', width / 2, 585);

      // Download the canvas as PNG
      const link = document.createElement('a');
      link.download = 'commitment-to-truth-certificate.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    });

    // Copy referral link handler
    document.getElementById('copyReferral').addEventListener('click', async () => {
      const referralInput = document.getElementById('referralLink');
      const copyBtn = document.getElementById('copyReferral');
      const copyText = document.getElementById('copyReferralText');
      const linkValue = referralInput.value;

      if (!linkValue) return;

      try {
        await navigator.clipboard.writeText(linkValue);
        copyBtn.classList.add('copied');
        copyText.textContent = 'Copied!';
        setTimeout(() => {
          copyBtn.classList.remove('copied');
          copyText.textContent = 'Copy';
        }, 2000);
      } catch (err) {
        referralInput.select();
        document.execCommand('copy');
        copyBtn.classList.add('copied');
        copyText.textContent = 'Copied!';
        setTimeout(() => {
          copyBtn.classList.remove('copied');
          copyText.textContent = 'Copy';
        }, 2000);
      }
    });

    // =====================
    // MUSIC PLAYER (Alexander Ebert - "Truth")
    // =====================
    let ytPlayer = null;
    let playerReady = false;
    let isPlaying = false;
    let shouldPlayAfterSubmit = false;

    const musicToggle = document.getElementById('musicToggle');
    const musicLabel = document.getElementById('musicLabel');

    // Load YouTube IFrame API
    const tag = document.createElement('script');
    tag.src = 'https://www.youtube.com/iframe_api';
    const firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // Called by YouTube API when ready
    function onYouTubeIframeAPIReady() {
      ytPlayer = new YT.Player('ytPlayer', {
        height: '1',
        width: '1',
        videoId: 'GtPK0gRdFgI',
        playerVars: {
          autoplay: 0,
          controls: 0,
          disablekb: 1,
          fs: 0,
          modestbranding: 1,
          rel: 0,
          loop: 1,
          playlist: 'GtPK0gRdFgI' // Required for loop to work
        },
        events: {
          onReady: onPlayerReady,
          onStateChange: onPlayerStateChange
        }
      });
    }

    function onPlayerReady(event) {
      playerReady = true;
      // If form was submitted before player was ready, play now
      if (shouldPlayAfterSubmit) {
        playMusic();
        shouldPlayAfterSubmit = false;
      }
    }

    function onPlayerStateChange(event) {
      // With loop enabled, song continues quietly
      // Only reset if paused externally (YT.PlayerState.PAUSED = 2)
      if (event.data === 2 && isPlaying) {
        // Paused by something other than our fade
        isPlaying = false;
        musicToggle.classList.remove('playing');
        musicLabel.textContent = 'Listen';
      }
    }

    function playMusic() {
      if (playerReady && ytPlayer) {
        ytPlayer.playVideo();
        isPlaying = true;
        musicToggle.classList.add('playing');
        musicLabel.textContent = 'Playing';
      }
    }

    function fadeOutMusic(callback) {
      if (!playerReady || !ytPlayer) return;

      const startVolume = ytPlayer.getVolume();
      const fadeSteps = 20;
      const fadeInterval = 100; // 2 seconds total fade
      let currentStep = 0;

      const fade = setInterval(() => {
        currentStep++;
        const newVolume = startVolume * (1 - currentStep / fadeSteps);
        ytPlayer.setVolume(Math.max(0, newVolume));

        if (currentStep >= fadeSteps) {
          clearInterval(fade);
          ytPlayer.pauseVideo();
          ytPlayer.setVolume(startVolume); // Reset for next play
          if (callback) callback();
        }
      }, fadeInterval);
    }

    function pauseMusic() {
      if (playerReady && ytPlayer) {
        // Fade out instead of abrupt stop
        musicToggle.classList.remove('playing');
        musicLabel.textContent = 'Listen';
        isPlaying = false;
        fadeOutMusic();
      }
    }

    function toggleMusic() {
      if (isPlaying) {
        pauseMusic();
      } else {
        playMusic();
      }
    }

    // Music toggle button click
    musicToggle.addEventListener('click', toggleMusic);

    // Music is available via the Listen button - no auto-play on form success
    // This avoids tying music to the commitment moment, keeping it neutral
  </script>
</body>
</html>
